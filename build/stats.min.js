// @drecom/stats.js - http://github.com/drecom/stats.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){"use strict";var e=function(e,t){var n=e,r=1e3/n,o=1e3/n*.6,a=2*Math.round(window.devicePixelRatio||1),i=80*a,f=48*a,l=3*a,c=2*a,u=3*a,d=25*a,s=74*a,m=20*a,p=d/2,v="#002",h="#124",y=0,x=0,S=m,M=0,g=[];if(t&&t instanceof Array){M=t.length;for(var w=0;w<M;w++)g.push(m)}var R=document.createElement("div");R.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000";var F=document.createElement("canvas");F.width=i,F.height=f,R.appendChild(F),F.style.cssText="width:80px;height:48px";var T=F.getContext("2d");T.font="bold "+9*a+"px Helvetica,Arial,sans-serif",T.textBaseline="top",T.fillStyle=v,T.fillRect(0,0,i,f),T.fillStyle=h,T.fillRect(u,d,s,m);var z=function(e,t,n,r){T.fillStyle=e;var o=Math.round((1-n/t)*m);m-a<o?o=m-a:o<0&&(o=0);var i=Math.min(o,r),f=Math.max(o,r)-i;return f<a&&(f=a),T.fillRect(u+s-a,d+i,a,f),o};return{dom:R,getFps:function(){return y},getMs:function(){return x},update:function(e,f,w,R){y=e,x=f,T.fillStyle=v,T.fillRect(0,0,i,d),T.fillStyle=o<=x?"#f08":"#0ff",T.fillText(Math.round(y)+" FPS  -  "+Math.round(x)+" MS",l,c),R&&(T.fillStyle="#fa0",T.fillText(R,l,p)),T.drawImage(F,u+a,d,s-a,m,u,d,s-a,m),T.fillStyle=h,T.fillRect(u+s-a,d,a,m),T.fillStyle="#a15";var A=Math.round((1-y/n)*m);if(A<0&&(A=0),T.fillRect(u+s-a,d+A,a,m-A),S=z("#0ff",r,x,S),M)for(var H=0;H<M;H++)g[H]=z(t[H].color,t[H].max,w[H],g[H])}}};return function(t){var n=t.maxFPS,r=void 0===n?60:n,o=t.maxMem,a=void 0===o?100:o,i=t.customGraphConf,f=t.drawInterval,l=void 0===f?1e3:f,c=!1;self.performance&&self.performance.memory&&self.performance.memory.usedJSHeapSize!=self.performance.memory.usedJSHeapSize&&(c=!0);var u=[];c&&u.push({color:"#fa0",max:a}),i&&i instanceof Array&&(u=u.concat(i));var d=new e(r,u),s=(performance||Date).now(),m=s,p=0,v=0,h=0,y="";return{dom:d.dom,getFps:function(){return d.getFps()},getMs:function(){return d.getMs()},getMem:function(){return v},setText:function(e){y=e},begin:function(){s=(performance||Date).now()},end:function(e){p++;var t=(performance||Date).now(),n=t-s;if(h<n&&(h=n),t>=m+l){var r=[],o=y;c&&(v=window.performance.memory.usedJSHeapSize/1048576,r.push(v),o=Math.round(v)+" MB  "+y),e&&e instanceof Array&&(r=r.concat(e)),d.update(1e3*p/(t-m),h,r,o),m=t,p=0,h=0}return t},update:function(e){s=this.end(e)}}}});